{{ define "main" }}

{{/* Sprache */}}
{{ $lang := .Site.Language.Lang }}

{{/* URLs robust per GetPage (zieht automatisch die richtige Sprache) */}}
{{ with site.GetPage "kontakt" }}   {{ $urlContact := .RelPermalink }}   {{ end }}
{{ with site.GetPage "zu-mir" }}    {{ $urlAbout   := .RelPermalink }}   {{ end }}
{{ with site.GetPage "impressum" }} {{ $urlImprint := .RelPermalink }}   {{ end }}

{{ $urlContact := (site.GetPage "kontakt").RelPermalink }}
{{ $urlAbout   := (site.GetPage "zu-mir").RelPermalink }}
{{ $urlImprint := (site.GetPage "impressum").RelPermalink }}

{{/* Labels */}}
{{ $isEN := eq $lang "en" }}
{{ $lblContact := cond $isEN "Contact" "Kontakt" }}
{{ $lblAbout   := cond $isEN "About" "Über mich" }}
{{ $lblImprint := cond $isEN "Imprint" "Impressum" }}

{{/* Hero */}}
<section class="hero">
  <h1>{{ .Site.Title }}</h1>
  {{ with .Site.Params.tagline }}
    <p class="subtitle mono">{{ . }}</p>
  {{ end }}
</section>

{{/* Tiles aus Data (Sektion: immer "sparten") */}}
{{ $tiles := .Site.Data.sparten }}
{{ with (index .Site.Data .Site.Language.Lang) }}
  {{ $tiles = (index . "sparten") | default $tiles }}
{{ end }}

<section class="tiles no-img">
  {{ range $tiles }}
    <a class="tile tile--plain" href='{{ (print "/sparten/" .slug "/") | relLangURL }}'>
      <div class="tile-inner">
        <h2>{{ .title | safeHTML }}</h2>
        {{ with .tagline }}<p class="desc mono">{{ . }}</p>{{ end }}
      </div>
      <span class="tile-caret">↗</span>
    </a>
  {{ end }}
</section>

{{/* CTA-Buttons (jetzt korrekt) */}}
<section class="about-cta">
  <div class="cta">
    <a class="btn btn-cta" href="{{ $urlContact }}">{{ $lblContact }}</a>
    <a class="btn btn-cta" href="{{ $urlAbout }}">{{ $lblAbout }}</a>
    <a class="btn btn-cta" href="{{ $urlImprint }}">{{ $lblImprint }}</a>
  </div>
</section>

{{ end }}
